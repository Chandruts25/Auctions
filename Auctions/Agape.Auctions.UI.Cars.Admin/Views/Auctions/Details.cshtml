@model List<DataAccessLayer.Models.Image>
@using AgapeModel = DataAccessLayer.Models;
@using AgapeModelUser = DataAccessLayer.Models;

@using System.Globalization;

@{
    if (!string.IsNullOrWhiteSpace(ViewBag.Layout))
    {
        Layout = "~/Views/Shared/" + ViewBag.Layout;
    }
    else
    {
        Layout = "_Layout_Page";
    }

    AgapeModel.Car carDetail = ViewBag.CarDetails;
    AgapeModelUser.User userDetail = ViewBag.UserDetails;
    string[] invalidStatusToBuy = { "Hold", "PendingPayment" };

    var videoUrl = (carDetail.Video != null && !string.IsNullOrEmpty(ViewBag.VideoUrl)) ? ViewBag.VideoUrl : "https://www.youtube.com/embed/vC8LbvYk6es";
}
<meta name="google-signin-client_id" content="1096748336323-54kstvgk2spgcivdq9o4s7hmlv0i0j3h.apps.googleusercontent.com">


<link href="//fonts.googleapis.com/css?family=Open+Sans+Condensed:300,300i,700%7COpen+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet" type="text/css">
<link rel="icon" href="images/favicon.ico" type="image/x-icon">
<link href="~/css/jquery-ui.css" rel="stylesheet">
<link href="~/css/bootstrap.css" rel="stylesheet">
<link href="~/css/font-awesome.css" rel="stylesheet">
<link href="~/css/elegant-icons.css" rel="stylesheet">

<link href="~/css/light-gallery.css" rel="stylesheet">
<link href="~/css/gflexslider.css" rel="stylesheet">
<link href="~/css/superslides.css" rel="stylesheet">
<link href="~/css/animate.css" rel="stylesheet">
<link href="~/css/select2.css" rel="stylesheet">
<link href="~/css/style.css" rel="stylesheet">

<script src="~/js/jquery.js"></script>
<script src="~/js/jquery-ui.js"></script>
<script src="~/js/jquery-migrate-1.2.1.min.js"></script>
<script src="~/js/jquery.easing.1.3.js"></script>
<script src="~/js/pointer-events.js"></script>
<script src="~/js/superfish.js"></script>
<script src="~/js/jquery.flexslider-min.js"></script>
<script src="~/js/select2.js"></script>
<script src="~/js/jquery.superslides.js"></script>
<script src="~/js/jquery.sticky.js"></script>
<script src="~/js/jquery.appear.js"></script>
<script src="~/js/jquery.ui.totop.js"></script>
<script src="~/js/jquery.caroufredsel.js"></script>
<script src="~/js/jquery.touchSwipe.min.js"></script>
<script src="~/js/material-parallax.js"></script>
<script src="~/js/rd-navbar.js"></script>

<script src="~/js/light-gallery.js"></script>

<script src="~/js/rd-mailform.js"></script>
<script src="~/js/scripts.js"></script>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.14/semantic.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.payment/3.0.0/jquery.payment.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.14/semantic.css" rel="stylesheet">


<link href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.9/css/intlTelInput.css" rel="stylesheet" media="screen">
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.9/js/intlTelInput.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.9/js/intlTelInput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.9/js/utils.js"></script>


<meta charset="UTF-8">
<meta name="description" content="Credit Card Validator">
<meta name="author" content="Sachin">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    button.btn-default.btn-form2-submit {
        width: 93%;
        margin: 0 4%;
    }

    /* The Modal (background) */
    .modal {
        display: none; /*
    en by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: #00000066;
        padding-top: 50px;
    }



    /* Modal Content/Box */
    .modal-content {
        background-color: #fefefe;
        margin: 5% auto;
        border: 1px solid #888;
        width: 385px;
        padding: 20px;
        padding-bottom: 30px;
    }

    h5.stitle {
        padding: 10px 15px;
        margin-top: 0;
        margin-bottom: 0;
        text-shadow: 0 1px 2px #151317;
        color: #fff;
        background-color: #181c2a;
        font-size: 16px;
        font-weight: 600;
        border-radius: 4px 4px 0 0;
        text-align: left;
    }

    .close1 {
        position: absolute;
        right: 12px;
        top: 2px;
        font-size: 24px;
        font-weight: bold;
        color: #898989;
    }



        .close1:hover,
        .close1:focus {
            color: #f44336;
            cursor: pointer;
        }

    a.pop-a {
        width: 100%;
        height: 35px;
        background: #ffffff;
        border: 1px solid;
        border-radius: 4px;
        font-size: 14px;
        margin-top: 10px;
        line-height: 33px;
        text-decoration: none;
    }

        a.pop-a.fb {
            background: #1877f2;
            color: white;
            border: 1px solid #c5c5c5;
        }

        a.pop-a.apple {
            background: black;
            color: white;
        }

        a.pop-a i {
            padding-right: 8px;
        }

    span.top-up {
        background: white;
        padding: 9px;
        color: #c9c9c9;
    }

    h3.color-class {
        color: #181818;
        font-weight: bold;
    }

    .p a {
        padding-left: 4px;
        color: #6199e1;
    }

    .p {
        color: black;
        padding: 10px;
    }

    .title21 {
        width: 50%;
        float: left;
        font-family: 'Open Sans';
        font-size: 14px;
        line-height: 20px;
        font-weight: 700;
        color: #202020;
        text-align: left;
        text-transform: uppercase;
        margin-top: 10px;
        margin-bottom: 20px;
    }

    .g-signin2 {
        width: 100%;
    }

    .abcRioButton.abcRioButtonLightBlue {
        width: 100% !important;
    }

    div#id02 .modal-content {
        width: 420px;
    }

.col-sm-10.cmmts ul li {
list-style: none;
}

.col-sm-10.cmmts ul li i {
    font-size: 20px !important;
}

    .col-sm-10.cmmts ul {
        display: flex;
        justify-content: space-between;
        padding: 0;
        background: #181c2a;
        padding: 12px;
        color: white;
        border-radius: 4px;
    }
</style>


<div id="id02" class="modal">

    <div class="row modal-content">

        <span onclick="document.getElementById('id02').style.display='none'" class="close1" title="Close Modal">×</span>

        <div class="col-sm-12 text-center">
            <img src="~/images/ShopCarHereLogo.png" style="height: 50px; padding-top: 13px;" />
        </div>


        <div class="col-sm-12 text-center">
            <h3 class="color-class"> Register to bid</h3>
        </div>

        <div class="col-sm-12 text-justify">
            <p>We require a valid credit card on file before you can bid. Winning bidders pay a 4.5% buyer’s fee to Cars & Bids on top of the winning bid amount. The minimum buyer’s fee is $225, and the maximum is $4,500.</a></p>
        </div>
        <div class="col-sm-12 pt-10 pb-10">
            <p>Bids are binding, so please bid wisely!</p>

        </div>
        <div class="col-sm-12 ">
            <h4> Credit Card Information</h4>

        </div>

        <form id="payment-form" method="post">
            <div class="col-sm-12">
                <div class="form-group form-wrap field">
                    <label>Name on card</label>
                    <input type="text" class="form-control" />
                </div>
            </div>
            <div class="col-sm-12 ">
                <div class="form-group form-wrap">
                    <label>Zip or Postal Code</label>
                    <input type="text" class="form-control" id="zip-code" maxlength="8" placeholder="ZIP Code" data-numeric>
                </div>
            </div>
            <div class="col-sm-12 ">
                <div class="form-group form-wrap field">
                    <label>Credit Card Number</label>
                    <input type="text" class="form-control" id="cc-number" placeholder="•••• •••• •••• ••••" data-payment='cc-number' />
                </div>
            </div>
            <div class="col-sm-12 p-0">
                <div class="col-sm-4">
                    <div class="form-group form-wrap field">
                        <label>Expiration</label>
                        <input type="password" class="form-control" id="cc-exp" data-payment='cc-exp' placeholder="MM/YY" />
                    </div>
                </div>
                <div class="col-sm-8">
                    <div class="form-group form-wrap field">
                        <label>CVC (3 or 4 digit code)</label>
                        <input type="text" class="form-control" id="cc-cvc" data-payment='cc-cvc' placeholder="CVC" />
                    </div>
                </div>
            </div>

            <div class="col-sm-12 ">
                <h4> Contact Information</h4>
            </div>

            <div class="col-sm-12 p-0 pb-10">
                <div class="form-group form-wrap">

                    <div class="col-sm-12">
                        <label>Phone Number (in the event you win an auction)</label>
                    </div>

                    <div class="col-sm-12">

                        <input id="phone" class="form-control" type="tel">
                        <span id="valid-msg" class="hide">Valid</span>
                        <span id="error-msg" class="hide">Invalid number</span>
                    </div>


                </div>
            </div>

            <div class="col-sm-12">
                <input type="button" class="btn btn-success" value="Register to bid" onclick="submitForAuction()">

            </div>
        </form>

    </div>
</div>

<input type="hidden" id="gmailId" />
<div id="id01" class="modal">

    <div class="row modal-content">

        <span onclick="document.getElementById('id01').style.display='none'" class="close1" title="Close Modal">×</span>

        <div class="col-sm-12 text-center">
            <img src="~/images/ShopCarHereLogo.png" style="height: 50px; padding-top: 13px;" />
        </div>

        <div id="login_before">
            <div class="col-sm-12 text-center">
                <h3 class="color-class">Sign up</h3>
            </div>

            <div class="col-sm-12 text-center">
                <p class="p">Already have an account?<a>Sign in here</a></p>
            </div>
            <div class="col-sm-12 text-center" style="display:flex">
                <div class="g-signin2" data-onsuccess="onSignIn"></div>

            </div>

            <div class="col-sm-12 text-center" style="display:flex">
                <a class="pop-a fb" onclick="window.open('https://www.facebook.com/', '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes');"><i class="fa fa-facebook-f"></i>Continue with Facebook</a>
            </div>
            <div class="col-sm-12 text-center" style="display:flex">
                <a class="pop-a apple" onclick="window.open('https://appleid.apple.com/#!&page=signin', '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes');"><i class='fa fa-apple'></i>Continue with Apple</a>
            </div>
            <div class="col-sm-12 text-center mt-20">
                <hr />

            </div>
            <div class="col-sm-12 text-center" style="position: relative; top: -32px;"><span class="top-up">or</span></div>
            <form>
                <div class="col-sm-12 text-center">
                    <div class="form-group form-wrap">

                        <input type="text" class="form-control" id="txtStartAmount" placeholder="Email Address" onkeypress="removeInvalidClass('txtStartAmount')">
                    </div>
                </div>
                <div class="col-sm-12 text-center">
                    <input type="button" class="btn btn-success" style=" width: 100%; }" value="Next" onclick="pay1()">

                </div>
            </form>
        </div>
        <div id="login_after" style="display:none">
            <div class="col-sm-12  text-center">
                <h3 class="color-class">
                    Must be verified bidder
                </h3>

            </div>
            <div class="col-sm-12">
                <p>Before you can contact the seller, you must become a verified bidder and agree to our bidding terms.</p>
            </div>
            <div class="col-sm-12">
                <a href="#" id="logout" onclick="signOut();">Sign out</a>
            </div>

            <div class="col-sm-6"><button class="btn btn-success" style="width: 100%; background: #cad2d9 !important; border: 1px solid black !important; }" onclick="document.getElementById('id01').style.display='none'">Cancel</button></div>
            <div class="col-sm-6"><button class="btn btn-success" style="width: 100%; }" onclick="pay()">View agreement</button></div>
        </div>


    </div>
</div>


<div id="id02" class="modal">
    <div class="row modal-content">

    </div>
</div>

<div class="top3-wrapper novi-background bg-cover">
    <div class="container">
        <div class="top2 clearfix">

            <div class="row">

                <div class="col-md-6">
                    <h4> <b> Bidding Details </b> </h4>
                </div>

                <div class="col-md-6 float-right">

                </div>

            </div>

        </div>

    </div>

</div>
<div class="section breadcrumbs1_wrapper novi-background">
    <div class="container">
        <div class="breadcrumbs1"><a href="/">Home</a><span></span>Details</div>
    </div>
</div>


<div class="section section-md-bottom content novi-background bg-cover">
    <div class="container">
        <div class="col" id="divShowErrorSuccess">
            <div class="col-sm-12" id="divDetailText">

            </div>
        </div>
    </div>
    <div class="container">
        <div class="row row-fix">
            <div class="col-sm-12 col-md-9 column-content">

                <div class="gslider-wrapper">
                    <div id="gslider" class="flexslider">
                        <ul class="slides">
                            @foreach (var item in Model.OrderBy(i => i.Order))
                            {
                                <li style="width: 842px; height: 600px;">
                                    <img src="@item.Url" class="img-responsive" style="width: 870px; height: 600px;">

                                </li>

                            }
                            <li style="width: 842px; height: 600px;">
                                <iframe width="870" height="600" src="@videoUrl"
                                        title="YouTube video player" frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

                            </li>
                        </ul>

                    </div>
                    <div id="carousel" class="flexslider">
                        <ul class="slides">
                            @foreach (var item in Model.OrderBy(i => i.Order))
                            {
                                <li style="width: 121px; height: 90px;">
                                    <img src="@item.ThumbnailUrl" class="img-responsive">
                                </li>
                            }
                            <li style="width: 121px; height: 90px;">
                                <img src="~/images/VideoThumpnail.jpg" class="img-responsive">

                            </li>
                        </ul>
                    </div>
                </div>

                <div class="col-sm-12 cmmts p-0 pb-30">
                    <div class="col-sm-10 cmmts p-0">
                        <ul>
                            <li><i class="fa fa-clock-o" style="font-size:36px">&nbsp;<span class="trip_2022-05-05"></span></i></li>
                            <li><i class="fa fa-arrow-up" style="font-size:36px">&nbsp;High&nbsp;Bid</i>$ 6,000</li>
                            <li><i class="fa fa-hashtag" style="font-size:36px">Bids&nbsp;6</i></li>
                            <li><i class="fa fa-comments-o" style="font-size:36px">&nbsp;Comments 9</i></li>
                        </ul>
                        
                       
                        
                    </div>
                    <div class="col-sm-2 pr-0">
                        <button class="btn btn-success" style="width: 100%; height: 46px;" onclick="pay()">Place bid</button>
                    </div>
                </div>

                <div class="tabs2-wrapper">
                    <ul class="tabs clearfix" data-tabgroup="second-tab-group">
                        <li class="active"><a href="#tabs3-1">VEHICLE OVERVIEW</a></li>
                        <li><a href="#tabs3-2">FEATURES & OPTIONS</a></li>
                        <li><a href="#tabs3-3">VEHICLE LOCATION</a></li>
                        <li><a href="#tabs3-4">Comments & Reviews</a></li>

                    </ul>
                </div>

                <div id="second-tab-group" class="tabgroup">
                    <div id="tabs3-1">
                        <div class="title2">
                            <input type="hidden" id="hdnCarId" value="@carDetail.Id" />s
                            DESCRIPTION
                        </div>
                        @carDetail.Description
                    </div>
                    <div id="tabs3-2">

                        <div class="row row-fix">
                            <div class="col-sm-6">
                                <div class="title2">EXTRA FEATURES</div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <ul class="ul3">
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                            <li><a href="#">Anti-Starter</a></li>
                                            <li><a href="#">Security System</a></li>
                                            <li><a href="#">Air Conditioning</a></li>
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                            <li><a href="#">Anti-Starter</a></li>
                                            <li><a href="#">Security System</a></li>
                                            <li><a href="#">Air Conditioning</a></li>
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                        </ul>
                                    </div>
                                    <div class="col-sm-6">
                                        <ul class="ul3">
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                            <li><a href="#">Anti-Starter</a></li>
                                            <li><a href="#">Security System</a></li>
                                            <li><a href="#">Air Conditioning</a></li>
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                            <li><a href="#">Anti-Starter</a></li>
                                            <li><a href="#">Security System</a></li>
                                            <li><a href="#">Air Conditioning</a></li>
                                            <li><a href="#">Alloy Wheels</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="title2">Essential Options</div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <ul class="ul3">
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                            <li><a href="#">Anti-Starter</a></li>
                                            <li><a href="#">Security System</a></li>
                                            <li><a href="#">Air Conditioning</a></li>
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                            <li><a href="#">Anti-Starter</a></li>
                                            <li><a href="#">Security System</a></li>
                                            <li><a href="#">Air Conditioning</a></li>
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                        </ul>
                                    </div>
                                    <div class="col-sm-6">
                                        <ul class="ul3">
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                            <li><a href="#">Anti-Starter</a></li>
                                            <li><a href="#">Security System</a></li>
                                            <li><a href="#">Air Conditioning</a></li>
                                            <li><a href="#">Alloy Wheels</a></li>
                                            <li><a href="#">Anti-Lock Brakes (ABS)</a></li>
                                            <li><a href="#">Anti-Theft</a></li>
                                            <li><a href="#">Anti-Starter</a></li>
                                            <li><a href="#">Security System</a></li>
                                            <li><a href="#">Air Conditioning</a></li>
                                            <li><a href="#">Alloy Wheels</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div id="tabs3-3">

                        <div id="map" style="width:840px; height:400px;">
                        </div>

                        @*<div class="google-map-container google-map-2" data-zoom='5' data-center="9870 St Vincent Place, Glasgow, DC 45 Fr 45." data-zoom="14" data-icon="images/gmap_marker.png" data-icon-active="images/gmap_marker_active.png" data-styles="[{&quot;featureType&quot;:&quot;water&quot;,&quot;elementType&quot;:&quot;geometry&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#e9e9e9&quot;},{&quot;lightness&quot;:17}]},{&quot;featureType&quot;:&quot;landscape&quot;,&quot;elementType&quot;:&quot;geometry&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#f5f5f5&quot;},{&quot;lightness&quot;:20}]},{&quot;featureType&quot;:&quot;road.highway&quot;,&quot;elementType&quot;:&quot;geometry.fill&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#ffffff&quot;},{&quot;lightness&quot;:17}]},{&quot;featureType&quot;:&quot;road.highway&quot;,&quot;elementType&quot;:&quot;geometry.stroke&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#ffffff&quot;},{&quot;lightness&quot;:29},{&quot;weight&quot;:0.2}]},{&quot;featureType&quot;:&quot;road.arterial&quot;,&quot;elementType&quot;:&quot;geometry&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#ffffff&quot;},{&quot;lightness&quot;:18}]},{&quot;featureType&quot;:&quot;road.local&quot;,&quot;elementType&quot;:&quot;geometry&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#ffffff&quot;},{&quot;lightness&quot;:16}]},{&quot;featureType&quot;:&quot;poi&quot;,&quot;elementType&quot;:&quot;geometry&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#f5f5f5&quot;},{&quot;lightness&quot;:21}]},{&quot;featureType&quot;:&quot;poi.park&quot;,&quot;elementType&quot;:&quot;geometry&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#dedede&quot;},{&quot;lightness&quot;:21}]},{&quot;elementType&quot;:&quot;labels.text.stroke&quot;,&quot;stylers&quot;:[{&quot;visibility&quot;:&quot;on&quot;},{&quot;color&quot;:&quot;#ffffff&quot;},{&quot;lightness&quot;:16}]},{&quot;elementType&quot;:&quot;labels.text.fill&quot;,&quot;stylers&quot;:[{&quot;saturation&quot;:36},{&quot;color&quot;:&quot;#333333&quot;},{&quot;lightness&quot;:40}]},{&quot;elementType&quot;:&quot;labels.icon&quot;,&quot;stylers&quot;:[{&quot;visibility&quot;:&quot;off&quot;}]},{&quot;featureType&quot;:&quot;transit&quot;,&quot;elementType&quot;:&quot;geometry&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#f2f2f2&quot;},{&quot;lightness&quot;:19}]},{&quot;featureType&quot;:&quot;administrative&quot;,&quot;elementType&quot;:&quot;geometry.fill&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#fefefe&quot;},{&quot;lightness&quot;:20}]},{&quot;featureType&quot;:&quot;administrative&quot;,&quot;elementType&quot;:&quot;geometry.stroke&quot;,&quot;stylers&quot;:[{&quot;color&quot;:&quot;#fefefe&quot;},{&quot;lightness&quot;:17},{&quot;weight&quot;:1.2}]}]">
                                <div class="google-map"></div>
                                <ul class="google-map-markers">
                                    <li data-location="9870 St Vincent Place, Glasgow, DC 45 Fr 45." data-description="9870 St Vincent Place, Glasgow"></li>
                                </ul>
                            </div>*@

                    </div>
                    <div id="tabs3-4">

                        <div class="comment-block clearfix">
                            <figure>
                                <img src="~/images/customer-2-104x104.jpg" alt="" class="img-responsive">
                            </figure>
                            <div class="caption">
                                <div class="top clearfix">
                                    <div class="txt1">John Doe</div>
                                    <div class="txt2">30 MAY 2018 <a href="#">Posted at 12:25 AM</a></div>
                                    <div class="ic10">
                                        <a href="#">
                                            <i class="fa fa-mail-reply novi-icon"></i>
                                            <span></span>
                                        </a>
                                    </div>
                                </div>
                                <div class="txt3">
                                    In eget dolor. Lorem ipsum dolor sit amet consectetuer adipiscing elit. Ut ornare cursus nibh. Sed
                                    lorem volutpat purus scel erisque dapibus. Etiam adipiscing ante nec nibh. In in felis in metus
                                    mollis blandit.
                                </div>
                            </div>
                        </div>

                        <div class="comment-block clearfix left1">
                            <figure>
                                <img src="~/images/customer-3-104x104.jpg" alt="" class="img-responsive">
                            </figure>
                            <div class="caption">
                                <div class="top clearfix">
                                    <div class="txt1">Amanda Bernshtein</div>
                                    <div class="txt2">30 MAY 2018 <a href="#">Posted at 12:25 AM</a></div>
                                    <div class="ic10">
                                        <a href="#">
                                            <i class="fa fa-mail-reply novi-icon"></i>
                                            <span></span>
                                        </a>
                                    </div>
                                </div>
                                <div class="txt3">
                                    In eget dolor. Lorem ipsum dolor sit amet consectetuer adipiscing elit. Ut ornare cursus nibh. Sed
                                    lorem volu tpat purus scelerisque dapibus. Etiam adipiscing ante nec nibh. In in felis in metus
                                    mollis
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="title21">ADD A REPLY</div>

                            <div class="title21" style="text-align:right"><button class="btn btn-success" onclick="document.getElementById('id01').style.display = 'block';">ASK A QUESTION</button></div>
                        </div>

                        <div id="note3"></div>
                        <div id="fields3">
                            <form id="ajax-contact-form3" class="form-horizontal rd-mailform" data-form-output="form-output-global" data-form-type="forms" method="post" action="bat/rd-mailform.php">
                                <div class="row">
                                    <div class="col-sm-12">

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group form-wrap">
                                                    <label for="inputName2" class="form-label">Your Name</label>
                                                    <input type="text" class="form-control" id="inputName2" name="name" required placeholder="Your Name">
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group form-wrap">
                                                    <label for="inputEmail2">Email</label>
                                                    <input type="text" class="form-control" id="inputEmail2" name="email" placeholder="E-mail address" required>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                    <div class="col-sm-12">

                                        <div class="form-group form-wrap">
                                            <label for="inputMessage2">Your Message</label>
                                            <textarea class="form-control" rows="9" id="inputMessage2" name="content" required placeholder="Your Message"></textarea>
                                        </div>

                                    </div>

                                </div>

                                <button type="submit" class="btn-default btn-cf-submit3">SEND COMMENTS</button>
                            </form>
                        </div>


                    </div>

                </div>


            </div>
            <div class="col-sm-12 col-md-3 column-sidebar">

                <div class="row">
                    <div class="col-sm-6 col-md-12">
                        <div class="banner2-wrapper">
                            <div class="contact-banner">
                                <div class="top-info clearfix">
                                    <div class="info1">
                                        <div class="banner-title">@carDetail.Make</div>
                                        <div class="txt2">
                                            <span class="txt">FIRST DRIVE REVIEW</span>
                                            <span class="stars">
                                                <i class="fa fa-star novi-icon" aria-hidden="true"></i>
                                                <i class="fa fa-star novi-icon" aria-hidden="true"></i>
                                                <i class="fa fa-star novi-icon" aria-hidden="true"></i>
                                                <i class="fa fa-star novi-icon" aria-hidden="true"></i>
                                                <i class="fa fa-star-o novi-icon" aria-hidden="true"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <input type="hidden" id="hdnCarSalePrice" value="@carDetail.SalePrice" />
                                <div class="txt3">Price : @carDetail.SalePrice.ToString("C", CultureInfo.CurrentCulture)</div>
                                <div class="txt4">@userDetail.CompanyName</div>
                                <div class="txt5">
                                    @userDetail.Address.Street, <br>
                                    @userDetail.Address.City, @userDetail.Address.State, @userDetail.Address.Zip<br>
                                    Phone: <a href="tel:#">@userDetail.Phone</a>
                                </div>

                                @if (!invalidStatusToBuy.Contains(carDetail.Status))
                                {
                                    <div style="margin-bottom:10px;">
                                        <input type="text" class="form-control" id="txtBidAmount" />
                                    </div>
                                    <div style="margin-bottom:10px;">
                                        <button type="button" class="btn btn-success" id="login-block" onclick="document.getElementById('id01').style.display='block'" style="width:100%;">Bid Now</button>
                                        <button type="button" class="btn btn-success" id="bid-block" onclick="biddingCar()" style="width:100%;">Bid Now</button>
                                    </div>
                                }

                                <div class="form-wrapper">
                                    <div id="note2"></div>
                                    <div id="fields2">
                                        <form id="ajax-contact-form2" class="form-horizontal rd-mailform" data-form-output="form-output-global" data-form-type="forms" method="post" action="bat/rd-mailform.php">
                                            <div class="form-group form-wrap">
                                                <label for="inputEmail">Email</label><input type="text" class="form-control" id="inputEmail" name="email" placeholder="E-mail address" required>
                                            </div>
                                            <div class="form-group form-wrap">
                                                <label for="inputMessage">Your Message</label>
                                                <textarea class="form-control" rows="9" id="inputMessage" placeholder="Message" name="content" required></textarea>
                                            </div>

                                            <div class="checkbox-inline">
                                                <label>
                                                    <input type="checkbox"> Send me a copy of this message
                                                </label>
                                            </div>

                                            <div class="checkbox-inline">
                                                <label>
                                                    <input type="checkbox" checked> Subscribe to our Newsletter
                                                </label>
                                            </div>

                                            <button type="submit" class="btn-default btn-cf-submit2">SEND E-MAIL</button>


                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-12">
                        <div class="banner3-wrapper">
                            <div class="banner3">
                                <div class="top-info clearfix">
                                    <div class="info1">
                                        <div class="txt1">Financing Offer</div>
                                    </div>
                                </div>
                                <div class="txt2">Vehicle</div>
                                <div class="txt3">RANGE ROVER</div>
                                <div class="form-wrapper">
                                    <div id="note1"></div>
                                    <div id="fields1">
                                        <form id="ajax-contact-form1" class="form-horizontal" action="javascript:;">

                                            <div class="row">
                                                <div class="col-xs-12 col-sm-6 col-md-12">
                                                    <div class="form-group">
                                                        <label for="inputName">Credit amount ($)</label>
                                                        <input type="text" class="form-control" id="inputName" name="name" value="34990">
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-sm-6 col-md-12">
                                                    <div class="form-group">
                                                        <div class="select1_wrapper">
                                                            <label>Running time</label>
                                                            <div class="select1_inner form-control">
                                                                <select class="select2 select" style="width: 100%">
                                                                    <option value="1">60 months</option>
                                                                    <option value="2">48 months</option>
                                                                    <option value="3">36 months</option>
                                                                    <option value="4">24 months</option>
                                                                    <option value="5">12 months</option>

                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="txt4">In cooperation with CHECK24</div>

                                            <button type="submit" class="btn-default btn-cf-submit1">CALCULATE NOW</button>


                                        </form>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                    <div class="col-xxs-12 col-xs-6 col-sm-6 col-md-12">
                        <div class="banner novi-background">
                            <figure><a href="#"><img src="~/images/banner.jpg" alt="" class="img-responsive"></a></figure>
                            
                        </div>
                    </div>


                </div>
            </div>



            <div class="col-sm-12 col-md-9">

                <div class="col-sm-12 p-0 pb-20">
                    <h3>Auctions ending soon</h3>
                </div>
                <div class="row">

                    <div class="col-xxs-12 col-xs-6 col-sm-4">
                        <div class="product-minimal">
                            <div class="thumbnail clearfix">
                                <figure class="product-minimal-img">
                                    <a style="cursor:pointer" asp-controller="Home" asp-action="CarView">
                                        <img src="https://badasscarzdev.blob.core.windows.net/car/007f9f57-32e7-4e45-b646-21ddbd263e1d/02-DSCN5241.JPG" alt="" class="img-responsive" style="width:270px;height:150px;">
                                    </a>
                                </figure>
                                <div class="caption">


                                    <div class="vdoicon">
                                        <p class="small">REGISTERED 1999</p>

                                    </div>


                                    <div class="product-minimal-title"><a style="cursor:pointer" asp-controller="Home" asp-action="CarView"> F-150 FORD</a></div>
                                    <div class="trip_2022-07-05"></div>
                                    <div class="info">
                                        <span class="price">₹ 70,000.00</span>
                                        <span class="speed">8000 KM</span>
                                    </div>
                                    <ul class="tag-list">
                                        <li><a href="#">Used</a></li>
                                        <li><a href="#">1999</a></li>
                                        <li><a href="#">Gear</a></li>
                                        <li><a href="#">Yellow</a></li>
                                        <li><a href="#">Diesel</a></li>
                                        <li><a href="" target="_blank"> Video</a></li>
                                    </ul>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="col-xxs-12 col-xs-6 col-sm-4">
                        <div class="product-minimal">
                            <div class="thumbnail clearfix">
                                <figure class="product-minimal-img">
                                    <a style="cursor:pointer" asp-controller="Home" asp-action="CarView">
                                        <img src="https://badasscarzdev.blob.core.windows.net/car/5a9342e4-ccae-4420-9cbe-b4aafca9c312/02-DSCN5960.JPG" alt="" class="img-responsive" style="width:270px;height:150px;">
                                    </a>
                                </figure>
                                <div class="caption">


                                    <div class="vdoicon">
                                        <p class="small">REGISTERED 2002</p>
                                    </div>


                                    <div class="product-minimal-title"><a style="cursor:pointer" asp-controller="Home" asp-action="CarView"> MDX ACURA</a></div>
                                    <div class="trip_2022-05-05"></div>
                                    <div class="info">
                                        <span class="price">₹ 60,000.00</span>
                                        <span class="speed">75555 KM</span>
                                    </div>
                                    <ul class="tag-list">
                                        <li><a href="#">Used</a></li>
                                        <li><a href="#">2002</a></li>
                                        <li><a href="#">Gear</a></li>
                                        <li><a href="#">Green</a></li>
                                        <li><a href="#">Diesel</a></li>
                                        <li><a href="" target="_blank"> Video</a></li>
                                    </ul>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="col-xxs-12 col-xs-6 col-sm-4">
                        <div class="product-minimal">
                            <div class="thumbnail clearfix">
                                <figure class="product-minimal-img">
                                    <a style="cursor:pointer" asp-controller="Home" asp-action="CarView">
                                        <img src="https://badasscarzdev.blob.core.windows.net/car/409b3f9f-18ab-4c84-8b47-e4322ee8ab8b/04-DSCN6430.JPG" alt="" class="img-responsive" style="width:270px;height:150px;">
                                    </a>
                                </figure>
                                <div class="caption">


                                    <div class="vdoicon">
                                        <p class="small">REGISTERED 1996</p>
                                    </div>


                                    <div class="product-minimal-title"><a style="cursor:pointer" asp-controller="Home" asp-action="CarView"> Integra ACURA</a></div>
                                    <div class="trip_2022-04-05"></div>
                                    <div class="info">
                                        <span class="price">₹ 50,000.00</span>
                                        <span class="speed">78855 KM</span>
                                    </div>
                                    <ul class="tag-list">
                                        <li><a href="#">Used</a></li>
                                        <li><a href="#">1996</a></li>
                                        <li><a href="#">Gear</a></li>
                                        <li><a href="#">Orange</a></li>
                                        <li><a href="#">Diesel</a></li>
                                        <li><a href="https://www.youtube.com/embed/9qjHTjUyfIU" target="_blank"> Video</a></li>
                                    </ul>
                                </div>

                            </div>
                        </div>
                    </div>

                   
                </div>
            </div>


        </div>

    </div>
</div>
<div class="snackbars" id="form-output-global"></div>
<script src="~/js/bootstrap.min.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>

<script>

   
  
    var email = "";
    var name = "";
    var fn = "";
    var ln = "";
    var span_Text = "";
    span_Text = document.getElementById("hellotext").innerText;

   

    //if (typeof span_Text === 'undefined') {

    //    alert(span_Text);
       
    //}

    function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
            console.log('User signed out.');

            $('#login_before').show();
            $('#login_after').hide();


            document.getElementById('login-block').style.display = 'block';
            document.getElementById('bid-block').style.display = 'none';


        });
    }
</script>
<script>
    function onSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();
        console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
        console.log('Name: ' + profile.getName());
        console.log('Image URL: ' + profile.getImageUrl());
        console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
       
        
        email = profile.getEmail();
        name = profile.getName();
        fn = profile.getGivenName();
        ln = profile.getFamilyName();
        $("#gmailId").val(profile.getId());
        if (email != "" || span_Text != "") {

            $.get("/Home/ValidateAndAddUser1", { Id: $("#gmailId").val() ,Email:email,Name:name,Fn:fn,Ln:ln }, function (data) {
                
            });
            $('#login_before').hide();
            $('#login_after').show();
            document.getElementById('login-block').style.display = 'none';
            document.getElementById('bid-block').style.display = 'block';
        }
        else {
            $('#login_before').show();
            $('#login_after').hide();
        }

    }
   
</script>

<script>

    if (email != "" || span_Text != "") {
      
        document.getElementById('login-block').style.display = 'none';
        document.getElementById('bid-block').style.display = 'block';
    }
    else {

        document.getElementById('login-block').style.display = 'block';
        document.getElementById('bid-block').style.display = 'none';

       
    }

    if (span_Text != "") {
        $('#logout').hide();
        
    }





    function pay() {

        if (email != "" || span_Text != "") {
            document.getElementById('id01').style.display = 'none';
            document.getElementById('id02').style.display = 'block';

            $('#login_before').hide();
            $('#login_after').show();
        }
        else {

            document.getElementById('id01').style.display = 'block';
            document.getElementById('id02').style.display = 'none';

            $('#login_before').show();
            $('#login_after').hide();
        }

        if (span_Text != "") {
            $('#logout').hide();

        }

    }

    // Get the modal
    var modal = document.getElementById('id01');
    var modal2 = document.getElementById('id02');

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }

        if (event.target == modal2) {
            modal2.style.display = "none";
        }

    }</script>


<script type="text/javascript">
    var currentLocations = [];
    var allLocations = [];
    var allDealerInfo = [];
    var markerDealers = [];

    function showMessage(messageText, labelClass) {
        $("#divShowErrorSuccess").show();
        $("#divDetailText").html("<div class=\"" + labelClass + "\">" + messageText + "</div>");
        $(window).scrollTop(0);
        $('#divShowErrorSuccess').delay(8000).fadeOut('slow');
    }

    function validateSave() {
        var message = "";
        if (!$("#txtBidAmount").val()) {
            message = "Please enter the bid amount to continue";
        }
        else if (parseInt($("#txtBidAmount").val()) < parseInt($("#hdnCarSalePrice").val())) {
            message = "Bid Amount Should not be less than sale price";
        }
        return message;
    }


    function biddingCar() {
        var error = validateSave();
        if (error == "") {

            var carId = $("#hdnCarId").val();
            var bidAmount = $("#txtBidAmount").val();

            var pUrl = "/Auctions/AddBidding";
            var messageText = "Saved";

            var biddingDetails = {
                CarId: carId, BiddingAmount: bidAmount
            };

            var jStr = "biddingDetails=" + JSON.stringify(biddingDetails);

            $.ajax({
                type: "POST",
                data: jStr,
                url: pUrl,
                dataType: "json",
                success: function (data) {
                    if (data != null) {
                        if (data.result == true) {
                            showMessage("Bidding Saved successfully", "alert alert-success");
                        }
                        else {
                            showMessage("Error occurred while save the bidding", "alert alert-danger");
                        }
                    }
                    else {
                        showMessage("Error occurred while save the bidding", "alert alert-danger");
                    }
                },
                error: function (error) {
                    showMessage("Error occurred while save the bidding", "alert alert-danger");
                }

            });
        }
        else {
            showMessage(error, "alert alert-danger");
        }
    }

    function redirectToPurchase(carId) {
        var carId = $("#hdnCarId").val();
        window.location.href = "/Purchase/Summary?carId=" + carId + "";
    }

     $(document).ready(function () {
        if ('@userDetail' != null && '@userDetail' != "") {
            var user = '@Html.Raw(Json.Serialize(userDetail))';
            var dealersSer = $.parseJSON(user);
            allDealerInfo = dealersSer;
            console.log(allDealerInfo);
            $(dealersSer).each(function (i, v) {
                $(this.address).each(function (j, a) {
                    allLocations.push({ dealerName: v.companyName, locations : this });
                });
            });
            currentLocations = allLocations;
           }
           InitMap();

     });

    var map;
    var markers = [];

    function InitMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 4,
            center: new google.maps.LatLng(39.8097343, -98.5556199),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        setMarkers();
        google.maps.event.trigger(markers[0], 'click');
    }

    function setMarkers() {
        var marker, i;
        var previnfowindow = false;
        $(currentLocations).each(function (i, v) {
            var location = v.locations;
            if (location.lat != null && location.lon != null) {
                var title = v.dealerName;
                var address = location.street + "," + location.city + "," + location.state + "," + location.country + "," + location.zip;
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(location.lat, location.lon),
                    map: map
                });
                markers.push(marker);

                google.maps.event.addListener(marker, 'click', (function (marker, i) {
                    return function () {
                        if (previnfowindow) {
                            previnfowindow.close();
                        }
                        var html = "<div><div><h5>" + title + "</h5></div>";
                        html += "<div><div><img src='/images/Default_Car.jpg' alt='' class='img-responsive' style='width:100px;height:70px;' /></div>";
                        html += "<div style='margin-top:5px;'>" + address + "</div></div></div>";
                        iw = new google.maps.InfoWindow({
                            content: html,
                            maxWidth: 350
                        });
                        previnfowindow = iw;
                        iw.open(map, marker);
                    }
                })(marker, i));
            }
            console.log(markers);
        });
    }


</script>







<script>
    function TimeRemaining() {
        var els = [...document.querySelectorAll('[class^="trip_"]')];
        els.forEach(el => {
            var end_time = el.className.split("_")[1]
            var deadline = new Date(end_time);
            var now = new Date();
            var t = Math.floor(deadline.getTime() - now.getTime());
            var days = Math.floor(t / (1000 * 60 * 60 * 24));
            var hours = Math.floor((t % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((t % (1000 * 60)) / 1000);
            if (t < 0) {

                var classname = document.getElementsByClassName("trip_" + end_time);


                for (var i = 0; i < classname.length; i++) {
                    document.getElementsByClassName("trip_" + end_time)[i].innerText = 'EXPIRED';
                }


            } else {
                var classname = document.getElementsByClassName("trip_" + end_time);
                for (var i = 0; i < classname.length; i++) {
                    document.getElementsByClassName("trip_" + end_time)[i].innerText = "TIME LEFT : " + days + "d " + hours + "h " + minutes + "m " + seconds + "s";
                }


            }
        })
        window.requestAnimationFrame(TimeRemaining);
    }

    function StartTimeRemaining() {
        TimeRemaining();
        window.requestAnimationFrame(TimeRemaining);
    }

    StartTimeRemaining()
</script>



<script type="text/javascript">
    function filterCars() {
        var make = $("#cmbMake").val();
        var model = $("#cmbModel").val();
        //var startPrice = $("#startAmount").val().replace("$","");
        //var endPrice = $("#endAmount").val().replace("$", "");
        var modelYearFrom = $("#cmbModelYearFrom").val();
        var modelYearTo = $("#cmbModelYearTo").val();

        if (modelYearTo == "0")
            modelYearTo = new Date().getFullYear();

        //if (startPrice == endPrice) {
        //    alert("End price should be greater than start price. Please change the Price range and retry");
        //    return false;
        //}

        if (modelYearFrom == modelYearTo) {
            alert("Model To Year should be greater than start year. Please change the year range and retry");
            return false;
        }

        $('#divSearchResults').load("/Car/SearchResults?make=" + encodeURIComponent(make) + "&model=" + model + "&startPrice=" + 0 + "&endPrice=" + 100000000 + "&yearFrom=" + modelYearFrom + "&yearTo=" + modelYearTo + "");
    }
    $(document).ready(function () {

        $("#btnReset").bind("click", function () {

            $('select#cmbMake').val(0).select2();
            $('select#cmbModel').val(0).select2();
            $('select#type').val(1).select2();
            $('select#cmbModelYearFrom').val(0).select2();
            $('select#cmbModelYearTo').val(0).select2();
            filterCars();
        });

    });

</script>



<script>
    /**
     * paymentForm
     *
     * A plugin that validates a group of payment fields.  See jquery.payment.js
     * Adapted from https://gist.github.com/Air-Craft/1300890
     */

    // if (!window.L) { window.L = function () { console.log(arguments);} } // optional EZ quick logging for debugging

    (function ($) {

        /**
         * The plugin namespace, ie for $('.selector').paymentForm(options)
         *
         * Also the id for storing the object state via $('.selector').data()
         */
        var PLUGIN_NS = 'paymentForm';

        var Plugin = function (target, options) {
            this.$T = $(target);
            this._init(target, options);

            /** #### OPTIONS #### */
            this.options = $.extend(
                true,               // deep extend
                {
                    DEBUG: false
                },
                options
            );

            this._cardIcons = {
                "visa": "visa icon",
                "mastercard": "mastercard icon",
                "amex": "american express icon",
                "dinersclub": "diners club icon",
                "discover": "discover icon",
                "jcb": "japan credit bureau icon",
                "default": "credit card alternative icon"
            };

            return this;
        }

        /** #### INITIALISER #### */
        Plugin.prototype._init = function (target, options) {
            var base = this;

            base.number = this.$T.find("[data-payment='cc-number']");
            base.exp = this.$T.find("[data-payment='cc-exp']");
            base.cvc = this.$T.find("[data-payment='cc-cvc']");
            base.brand = this.$T.find("[data-payment='cc-brand']");
            base.onlyNum = this.$T.find("[data-numeric]");

            // Set up all payment fields inside the payment form
            base.number.payment('formatCardNumber').data('payment-error-message', 'Please enter a valid credit card number.');
            base.exp.payment('formatCardExpiry').data('payment-error-message', 'Please enter a valid expiration date.');
            base.cvc.payment('formatCardCVC').data('payment-error-message', 'Please enter a valid CVC.');
            base.onlyNum.payment('restrictNumeric');

            // Update card type on input
            base.number.on('input', function () {
                base.cardType = $.payment.cardType(base.number.val());
                var fg = base.number.closest('.ui.icon.input');
                if (base.cardType) {
                    base.brand.text(base.cardType);
                    // Also set an icon
                    var icon = base._cardIcons[base.cardType] ? base._cardIcons[base.cardType] : base._cardIcons["default"];
                    fg.children('i').attr("class", icon);
                    //("<i class='" + icon + "'></i>");
                } else {
                    $("[data-payment='cc-brand']").text("");
                }
            });

            // Validate card number on change
            base.number.on('change', function () {
                base._setValidationState($(this), !$.payment.validateCardNumber($(this).val()));
            });

            // Validate card expiry on change
            base.exp.on('change', function () {
                base._setValidationState($(this), !$.payment.validateCardExpiry($(this).payment('cardExpiryVal')));
            });

            // Validate card cvc on change
            base.cvc.on('change', function () {
                base._setValidationState($(this), !$.payment.validateCardCVC($(this).val(), base.cardType));
            });
        };

        /** #### PUBLIC API (see notes) #### */
        Plugin.prototype.valid = function () {
            var base = this;

            var num_valid = $.payment.validateCardNumber(base.number.val());
            var exp_valid = $.payment.validateCardExpiry(base.exp.payment('cardExpiryVal'));
            var cvc_valid = $.payment.validateCardCVC(base.cvc.val(), base.cardType);

            base._setValidationState(base.number, !num_valid);
            base._setValidationState(base.exp, !exp_valid);
            base._setValidationState(base.cvc, !cvc_valid);

            return num_valid && exp_valid && cvc_valid;
        }

        /** #### PRIVATE METHODS #### */
        Plugin.prototype._setValidationState = function (el, erred) {
            var fg = el.closest('.field');
            fg.toggleClass('error', erred).toggleClass('', !erred);
            fg.find('.payment-error-message').remove();
            if (erred) {
                fg.append("<span class='ui pointing red basic label payment-error-message'>" + el.data('payment-error-message') + "</span>");
            }
            return this;
        }

        /**
         * EZ Logging/Warning (technically private but saving an '_' is worth it imo)
         */
        Plugin.prototype.DLOG = function () {
            if (!this.DEBUG) return;
            for (var i in arguments) {
                console.log(PLUGIN_NS + ': ', arguments[i]);
            }
        }
        Plugin.prototype.DWARN = function () {
            this.DEBUG && console.warn(arguments);
        }


        /*###################################################################################
         * JQUERY HOOK
         ###################################################################################*/

        /**
         * Generic jQuery plugin instantiation method call logic
         *
         * Method options are stored via jQuery's data() method in the relevant element(s)
         * Notice, myActionMethod mustn't start with an underscore (_) as this is used to
         * indicate private methods on the PLUGIN class.
         */
        $.fn[PLUGIN_NS] = function (methodOrOptions) {
            if (!$(this).length) {
                return $(this);
            }
            var instance = $(this).data(PLUGIN_NS);

            // CASE: action method (public method on PLUGIN class)
            if (instance
                && methodOrOptions.indexOf('_') != 0
                && instance[methodOrOptions]
                && typeof (instance[methodOrOptions]) == 'function') {

                return instance[methodOrOptions](Array.prototype.slice.call(arguments, 1));


                // CASE: argument is options object or empty = initialise
            } else if (typeof methodOrOptions === 'object' || !methodOrOptions) {

                instance = new Plugin($(this), methodOrOptions);    // ok to overwrite if this is a re-init
                $(this).data(PLUGIN_NS, instance);
                return $(this);

                // CASE: method called before init
            } else if (!instance) {
                $.error('Plugin must be initialised before using method: ' + methodOrOptions);

                // CASE: invalid method
            } else if (methodOrOptions.indexOf('_') == 0) {
                $.error('Method ' + methodOrOptions + ' is private!');
            } else {
                $.error('Method ' + methodOrOptions + ' does not exist.');
            }
        };
    })(jQuery);

    /* Initialize validation */
    var payment_form = $('#payment-form').paymentForm();

    $('#payment-form').on('submit', function () {
        event.preventDefault();
        var valid = $(this).paymentForm('valid');
        if (valid) {
            console.log('CC info is good!');
            stripe();
        } else {
            console.log('Badman Cardfaker');
        }
    });
</script>


<script>
    var telInput = $("#phone"),
        errorMsg = $("#error-msg"),
        validMsg = $("#valid-msg");

    // initialise plugin
    telInput.intlTelInput({

        allowExtensions: true,
        formatOnDisplay: true,
        autoFormat: true,
        autoHideDialCode: true,
        autoPlaceholder: true,
        defaultCountry: "auto",
        ipinfoToken: "yolo",

        nationalMode: false,
        numberType: "MOBILE",
        //onlyCountries: ['us', 'gb', 'ch', 'ca', 'do'],
        preferredCountries: ['sa', 'ae', 'qa', 'om', 'bh', 'kw', 'ma'],
        preventInvalidNumbers: true,
        separateDialCode: true,
        initialCountry: "auto",
        geoIpLookup: function (callback) {
            $.get("http://ipinfo.io", function () { }, "jsonp").always(function (resp) {
                var countryCode = (resp && resp.country) ? resp.country : "";
                callback(countryCode);
            });
        },
        utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.9/js/utils.js"
    });

    var reset = function () {
        telInput.removeClass("error");
        errorMsg.addClass("hide");
        validMsg.addClass("hide");
    };

    // on blur: validate
    telInput.blur(function () {
        reset();
        if ($.trim(telInput.val())) {
            if (telInput.intlTelInput("isValidNumber")) {
                validMsg.removeClass("hide");
            } else {
                telInput.addClass("error");
                errorMsg.removeClass("hide");
            }
        }
    });

    // on keyup / change flag: reset
    telInput.on("keyup change", reset);



</script>